# Video Interview Evaluation System

## Overview

This system provides a comprehensive video interview evaluation platform that automatically analyzes candidate responses and provides detailed feedback to recruiters. The evaluation system uses advanced AI-powered analysis to assess multiple dimensions of candidate performance.

## Features

### ðŸŽ¯ **Sophisticated Evaluation Engine**
- **Multi-dimensional Analysis**: Evaluates 10+ different aspects of candidate responses
- **Standardized Scoring**: Uses consistent scoring scales across all evaluation criteria
- **AI-Powered Insights**: Leverages GPT-4 for intelligent analysis and feedback generation
- **Real-time Processing**: Evaluates responses immediately after recording

### ðŸ“Š **Comprehensive Feedback System**
- **Detailed Labels**: Each response is analyzed across multiple dimensions
- **Justified Scores**: Every evaluation includes explanations for the assigned scores
- **Improvement Suggestions**: Provides actionable feedback for candidates
- **Performance Trends**: Tracks candidate performance across multiple questions

### ðŸŽ¥ **Video Recording & Transcription**
- **High-Quality Recording**: Captures both video and audio
- **Automatic Transcription**: Converts speech to text using OpenAI Whisper
- **Language Detection**: Supports multiple languages (English, Arabic, etc.)
- **Quality Assessment**: Evaluates transcription accuracy

### ðŸ“ˆ **Recruiter Dashboard**
- **Performance Overview**: Visual representation of candidate performance
- **Detailed Analytics**: Comprehensive breakdown of evaluation results
- **Candidate Comparison**: Easy comparison between multiple candidates
- **Export Capabilities**: Download evaluation reports

## Evaluation Dimensions

### Degree-Based Dimensions
- **Coverage of Expected Concepts**: How well the candidate addresses key themes
- **Alignment with Role**: Fit for responsibilities and seniority level
- **Solution Design Quality**: Clarity and feasibility of proposed solutions

### Quality-Based Dimensions
- **Technical Accuracy**: Correctness of technical content
- **Clarity of Expression**: Communication effectiveness
- **Answer Structure**: Logical organization of responses

### Binary Dimensions
- **Self-Reflection/Learning**: Evidence of personal growth
- **Assumptions Articulated**: Clarity of underlying assumptions

### Impact Dimensions
- **Team Collaboration**: Evidence of teamwork
- **Impact Orientation**: Results and outcomes produced

## API Endpoints

### `/api/video-interview-evaluation`
**POST** - Main evaluation endpoint
```json
{
  "question": "What is your experience with React?",
  "answer": "I have 3 years of experience...",
  "interviewType": "technical"
}
```

**Response:**
```json
{
  "labels": {
    "Technical Accuracy": {
      "value": "Mostly Correct",
      "justification": "Demonstrates solid understanding..."
    }
  },
  "evaluation_score": 7.5,
  "detailed_scores": {...},
  "combined_score": 7.8,
  "timestamp": "2024-01-15T10:30:00Z"
}
```

### `/api/test-evaluation`
**POST** - Simplified evaluation for testing
```json
{
  "question": "Tell me about yourself",
  "answer": "I am a software developer..."
}
```

## Database Schema

### UserAnswer Table
```sql
CREATE TABLE "userAnswer" (
  "id" integer PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
  "mockIdRef" varchar NOT NULL,
  "question" varchar NOT NULL,
  "userAns" text,
  "feedback" text,
  "rating" varchar,
  "suggestions" text,
  "userEmail" varchar,
  "createdAt" varchar,
  "interview_type" varchar,
  "audioRecording" text,
  "language" varchar,
  "detailedEvaluation" jsonb,
  "evaluationScore" varchar,
  "detailedScores" jsonb,
  "combinedScore" varchar,
  "overallAssessment" text
);
```

## Scoring System

### Label Score Mapping
```javascript
const LABEL_SCORE_MAP = {
  // Degree-based
  'None': 0, 'Minimal': 1.7, 'Low': 3.3, 'Moderate': 5, 
  'Considerable': 6.7, 'High': 8.3, 'Extensive': 10,
  
  // Quality-based
  'Very Poor': 0, 'Poor': 2, 'Below Average': 4, 'Average': 5,
  'Above Average': 6, 'Strong': 7.5, 'Excellent': 9, 'Exceptional': 10,
  
  // Binary
  'Not Detected': 0, 'Partially Detected': 3.3, 
  'Detected': 6.7, 'Clearly Evident': 10
};
```

### Weighted Scoring
```javascript
const LABEL_WEIGHTS = {
  "Relevance to Question": 1.5,
  "Technical Accuracy": 1.5,
  "Clarity of Expression": 1.2,
  "Answer Structure": 1.2
};
```

## Components

### RecordAnswerSection
- Handles video/audio recording
- Manages transcription
- Calls evaluation API
- Saves results to database

### VideoCandidateFeedbackDialog
- Displays detailed evaluation results
- Shows performance metrics
- Provides improvement suggestions
- Visualizes evaluation dimensions

### VideoInterviewDetailContainer
- Overview dashboard for recruiters
- Performance analytics
- Candidate comparison tools
- Question management

## Usage Flow

1. **Interview Setup**
   - Recruiter creates video interview
   - Configures questions and settings
   - Shares interview link with candidates

2. **Candidate Interview**
   - Candidate accesses interview link
   - Records video responses to questions
   - System transcribes audio automatically
   - Real-time evaluation provides feedback

3. **Evaluation Processing**
   - AI analyzes each response
   - Generates detailed evaluation labels
   - Calculates weighted scores
   - Stores results in database

4. **Recruiter Review**
   - Access comprehensive dashboard
   - View detailed candidate evaluations
   - Compare multiple candidates
   - Make informed hiring decisions

## Configuration

### Environment Variables
```env
NEXT_PUBLIC_OPENAI_API_KEY=your_openai_api_key
DATABASE_URL=your_database_connection_string
```

### OpenAI Models Used
- **GPT-4**: Main evaluation engine
- **GPT-4o-mini**: Fallback evaluation
- **Whisper**: Audio transcription

## Performance Optimization

### Caching
- Evaluation results cached to avoid duplicate processing
- Database queries optimized with proper indexing
- API responses cached for better performance

### Error Handling
- Graceful fallbacks for API failures
- Default evaluation scores for edge cases
- Comprehensive error logging and monitoring

### Scalability
- Async processing for evaluation requests
- Database connection pooling
- CDN for static assets

## Security

### Data Protection
- All audio/video data encrypted in transit
- Personal information anonymized where possible
- GDPR-compliant data handling

### Access Control
- Role-based access to evaluation results
- Secure API authentication
- Audit logging for all operations

## Future Enhancements

### Planned Features
- **Multi-language Support**: Enhanced language detection and evaluation
- **Advanced Analytics**: Machine learning insights and predictions
- **Integration APIs**: Connect with existing HR systems
- **Mobile App**: Native mobile experience for candidates
- **Real-time Collaboration**: Multiple recruiters can review simultaneously

### Technical Improvements
- **Performance Optimization**: Faster evaluation processing
- **Enhanced AI Models**: More sophisticated evaluation algorithms
- **Better UI/UX**: Improved user interface and experience
- **Advanced Reporting**: Customizable evaluation reports

## Troubleshooting

### Common Issues

1. **Evaluation API Fails**
   - Check OpenAI API key configuration
   - Verify API rate limits
   - Review error logs for specific issues

2. **Transcription Issues**
   - Ensure audio quality is sufficient
   - Check language detection settings
   - Verify Whisper API access

3. **Database Errors**
   - Check database connection
   - Verify schema migrations
   - Review query performance

### Support

For technical support or questions about the evaluation system, please refer to the project documentation or contact the development team.

## License

This project is licensed under the MIT License - see the LICENSE file for details. 